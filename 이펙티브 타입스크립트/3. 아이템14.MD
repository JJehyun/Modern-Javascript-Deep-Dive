ğŸ¯ğŸ’¡ğŸ”¥ğŸ“Œâœ…

# ì•„ì´í…œ 14 `íƒ€ì… ì—°ì‚°ê³¼ ì œë„ˆë¦­ ì‚¬ìš©ìœ¼ë¡œ ë°˜ë³µ ì¤„ì´ê¸°`

- ê°™ì€ ì½”ë“œë¥¼ ë°˜ë³µí•˜ì§€ëŠ” ë§ë¼
- `ê°™ì€ íƒ€ì…ì„ ë°˜ë³µ`í•˜ëŠ” ê²ƒì€ ì½”ë“œ ì¤‘ë³µë§Œí¼ ë§ì€ ë¬¸ì œë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
  - `DRY ì›ì¹™`

<br />

## íƒ€ì… ê°„ì— ë§¤í•‘í•˜ëŠ” ë°©ë²•ì„ ìµíˆë©´, íƒ€ì… ì •ì˜ì—ì„œë„ DRYì˜ ì¥ì ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

- `ë°˜ë³µì„ ì¤„ì´ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ íƒ€ì…ì— ì´ë¦„ì„ ë¶™ì´ëŠ” ê²ƒì´ë‹¤.`
- ![image](../image/t761.png)
  - í•¨ìˆ˜ì— `íƒ€ì…`ì´ `ë°˜ë³µì `ìœ¼ë¡œ ë“±ì¥í•œë‹¤
- ![image](../image/t762.png)
  - `íƒ€ì…ì— ì´ë¦„ì„ ë¶™ì´ë©´`, íƒ€ì…ì´ `ë°˜ë³µì `ìœ¼ë¡œ `ë“±ì¥`í•˜ëŠ” ê²ƒì„ `ë§‰ì„ ìˆ˜ ìˆë‹¤.`

<br />
<br />

## ëª‡ëª‡ í•¨ìˆ˜ê°€ ê°™ì€ íƒ€ì… ì‹œê·¸ë‹ˆì²˜ë¥¼ ê³µìœ í•˜ê³  ìˆë‹¤ë©´, í•´ë‹¹ ì‹œê·¸ë‹ˆì²˜ë¥¼ ëª…ëª…ëœ íƒ€ì…ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.

> ì˜ˆì œ

```ts
function get(url: string, opts: Otions): Promise<Response>;
function post(url: string, opts: Otions): Promise<Response>;

//íƒ€ì… ë¶„ë¦¬
type HTTPFunction = (Url: string, opts: Options) => Promise<Response>;
const get: HTTPFunction = (url, opts) => {};
const post: HTTPFunction = (url, opts) => {};
```

<br />
<br />

## í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•˜ê²Œ í•´ì„œ ë°˜ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.

- ì˜ˆì‹œ
  - ![image](../image/t77.png)

<br />
<br />

## ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íƒ€ì…ì„ í™•ì¥í•˜ëŠ” ê²½ìš°ì— ì¸í„°ì„¹ì…˜ ì—°ì‚°ì(&)ì˜ ì‚¬ìš©ë„ ê°€ëŠ¥í•˜ë‹¤.

> ì˜ˆì‹œ

```ts
// ì´ëŸ° ê¸°ë²•ì€ ìœ ë‹ˆì˜¨ íƒ€ì…(í™•ì¥í•  ìˆ˜ ì—†ëŠ”)ì— ì†ì„±ì„ ì¶”ê°€í•˜ë ¤ê³  í•  ë•Œ íŠ¹íˆ ìœ ìš©í•˜ë‹¤.
type PersonWithBirthDate = Person & { birth: Date };
```

<br />
<br />

## ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ í‘œí˜„í•˜ëŠ” `State íƒ€ì…` , ë‹¨ì§€ ë¶€ë¶„ë§Œ í‘œí˜„ í•˜ëŠ” `TopNavState`ê°€ ìˆëŠ” ê²½ìš°ì˜ ì¤‘ë³µ í”¼í•˜ê¸°

- ![image](../image/t78.png)
  - ì•„ë˜ ì˜ˆì œ ì½”ë“œ ì™„ì„± ì‹œ

> ì˜ˆì œ ì½”ë“œ

```ts
// ì „ì²´ ìƒíƒœ
interface State {
  userId: string;
  pageTitle: string;
  recentFiles: string[];
  pageContents: string;
}
// ë¶€ë¶„ë§Œ í‘œí˜„í•˜ëŠ” ìƒíƒœ
interface TopNavState {
  userId: string;
  pageTitle: string;
  recentFiles: string[];
}

//  Stateì˜ ë¶€ë¶„ ì§‘í•©ìœ¼ë¡œ TopNavStateì˜ ì¤‘ë³µ ì •ì˜ í”¼í•˜ê¸°
type TopNavState = {
  [k in "userId" | "pageTitle" | "recentFiles"]: State[k];
};
// ì´ ë°©ì‹ë„ ê°€ëŠ¥!
type TopNavState = Pick<State, "userId" | "pageTitle" | "recentFiles">;
```

<br />

- ìœ„ `[ k in ] : T[K]` ë°©ì‹ì€ ë°°ì—´ì˜ í•„ë“œë¥¼ ë£¨í”„ ë„ëŠ” ê²ƒê³¼ ê°™ì€ ë°©ì‹ì´ë©°, í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆë‹¤.
- `Pick`ì€ ì œë„¤ë¦­ íƒ€ì…ì´ê³ , `Pickë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ì´ë‹¤`.
  - `Pickì€ Tì™€ K ë‘ ê°€ì§€ íƒ€ì…ì„ ë°›ì•„ì„œ ê²°ê³¼ íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.`

<br />

## íƒœê·¸ëœ ìœ ë‹ˆì˜¨ì—ì„œë„ ë‹¤ë¥¸ í˜•íƒœì˜ ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

> ì—ì œ ì½”ë“œ

```ts
interface SaveAction {
  type: "save";
}
interface LoadAction {
  type: "load";
}
type Action = SaveAction | LoadAction;
//.
//..
//...
// ìœ„ íƒ€ì…ì˜ ë°˜ë³µì´ ì¼ì–´ë‚¨ bad!
type ActionType = "save" | "load";

// íƒ€ì…ì˜ ë°˜ë³µì„ ì—†ì• ê¸°(ì¸ë±ì‹±),(pick) ë‘˜ì´ ì°¨ì´ì ì´ ìˆìŒ good!
type ActionType = Action["type"]; // íƒ€ì…ì€ "save" | "load"
type ActionType = Pick<Action, "type">; // íƒ€ì…ì€ {type : "save" | "load"}
```

<br />
<br />

## ìƒì„±í•˜ê³  ë‚œ ë‹¤ìŒ ì—…ë°ì´íŠ¸ê°€ ë˜ëŠ” í´ë˜ìŠ¤ ì •ì˜ ì‹œ, update ë©”ì„œë“œ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì€ ìƒì„±ìì™€ ë™ì¼í•˜ë©´ì„œ ì˜µì…”ë„ì´ëœë‹¤.

- ë§¤í•‘ëœ íƒ€ì…ê³¼ `keyof`ë¥¼ ì‚¬ìš©í•˜ë©´ `Options`ìœ¼ë¡œ `OptionsUpdate`ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- `keyof`
  - `íƒ€ì…`ì„ ë°›ì•„ì„œ `ì†ì„± íƒ€ì…`ì˜ `ìœ ë‹ˆì˜¨`ì„ `ë°˜í™˜`í•œë‹¤.
- `[k in keyof Options]`
  - ìˆœíšŒë§ˆì—¬ Options ë‚´ Kê°’ì— í•´ë‹¹í•˜ëŠ” ì†ì„±ì´ ìˆëŠ”ì§€ ì°¾ëŠ”ë‹¤.

> ì˜ˆì œ ì½”ë“œ

```ts
interface Options {
  width: number;
  height: number;
  color: string;
  label: string;
}
//íƒ€ì… ì¤‘ë³µì´ ë°œìƒí•œë‹¤.
interface OptionsUpdate {
  width?: number;
  height?: number;
  color?: string;
  label?: string;
}

//ë§¤í•‘ëœ íƒ€ì…ê³¼ `keyof`ë¥¼ ì‚¬ìš©í•˜ë©´ `Options`ìœ¼ë¡œ `OptionsUpdate`ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
// ìœ„ OptionsUpdateì™€ ë™ì¼í•œ íƒ€ì…
// ì´ì½”ë“œë¡œ ìœ„ê°™ì€ ì½”ë“œì˜ ì¤‘ë³µì„ í”¼í•  ìˆ˜ ìˆë‹¤.
type OptionsUpdate = { [k in keyof Options]?: Options[k] };
```

> keyof

```ts
type OtionsKeys = keyof Options;
// íƒ€ì…ì€ "width" | "height" | "color" | "label"
```

<br />
<br />

## ê°’ì˜ í˜•íƒœì— í•´ë‹¹í•˜ëŠ” íƒ€ì…ì„ ì •ì˜ í•˜ê³  ì‹¶ì„ ë•Œ

```TS
const INIT_OPTIONS = {
    width : 640,
    height : 480,
    color : '#00FF00',
    label : 'VGV'
}
//bad!!
interface Options {
    width : string,
    height : number,
    color : string,
    label : string
}


// typeofë¥¼ ì‚¬ìš© í•œì¤„ë¡œ í‘œí˜„ì´ ê°€ëŠ¥í•˜ë‹¤
// GOOD!!
type Options = typeof INIT_OPTIONS
```

<br />
<br />

## í•¨ìˆ˜ or ë©”ì„œë“œì˜ ë°˜í™˜ ê°’ì— ëª…ëª…ëœ íƒ€ì…ì„ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ\

- `ReturnType`ì€ `ê°’`ì´ ì•„ë‹ˆë¼ `íƒ€ì…`ì— ì ìš©ëœë‹¤.

- ex)
- ![image](../image/t81.png)

```ts
// ReturnTypeë¥¼ ì‚¬ìš©
type UserInfo = ReturnType<typeof getUserInfo>;
```

<br />

```
âœ… ì œë„¤ë¦­ íƒ€ì…ì€ íƒ€ì…ì„ ìœ„í•œ í•¨ìˆ˜ì™€ ê°™ë‹¤.
âœ… ë˜í•œ DRY ì›ì¹™ì„ ì§€í‚¬ ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤.
```

<br />

## ì œë„¤ë¦­ íƒ€ì…ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ `extends`ì‚¬ìš©

- `extends`ë¥¼ ì´ìš©í•˜ë©´, `ì œë„ˆë¦­ ë§¤ê°œë³€ìˆ˜`ê°€ `íŠ¹ì • íƒ€ì…`ì„ `í™•ì¥`í•œë‹¤ê³  ì„ ì–¸ í•  ìˆ˜ ìˆë‹¤.

> ìœ„ ì˜ˆì œ

```ts
interface Name {
  first: string;
  last: string;
}
type DacingDuo<T extends Name> = [T, T];
//ì˜³ë°”ë¥¸ ì‚¬ìš©
const Duo1: DacingDuo<Name> = [
  { first: "one", last: "two" },
  { first: "three", last: "four" },
]; // OK

// ì˜ëª»ëœ ì‚¬ìš©
const Duo2: DacingDuo<{ first: string }> = [
  //Error
  //{ first: string }ì€ Nameì„ í™•ì¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
];
```

<br />

<br />

<br />

```
ğŸ“Œ ìš”ì•½
- DRY ì›ì¹™ì„ íƒ€ì…ì—ë„ ìµœëŒ€í•œ ì ìš©í•´ì•¼í•œë‹¤. (ì¤‘ë³µ ì½”ë“œ í”¼í•˜ê¸°)
- íƒ€ì…ì— ì´ë¦„ì„ ë¶™ì—¬ì„œ ë°˜ë³µì„ í”¼í•˜ê³ , extendsë¥¼ ì‚¬ìš©í•´ì„œ ì¸í„°í˜ì´ìŠ¤ ì¤‘ë³µ í”¼í•˜ê¸°
- keyof, typeod, ì¸ë±ì‹±, ë§¤í•‘ëœ íƒ€ì…
- ì œë„ˆë¦­ íƒ€ì…ì€ íƒ€ì…ì„ ìœ„í•œ í•¨ìˆ˜ì™€ ê°™ë‹¤. ì œë„ˆë¦­ íƒ€ì…ì„ ì œí•œí•˜ë ¤ë©´ extendsë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì •ì˜ëœ Pick, ReturnType ê°™ì€ ì œë„ˆë¦­ íƒ€ì…ì— ìµìˆ™ í•´ì ¸ì•¼ í•œë‹¤.
```

<br />

<br />

<br />

# ì œë„¤ë¦­ íƒ€ì…

> í•¨ìˆ˜ì—ì„œ ì‚¬ìš©

```ts
//TëŠ” íƒ€ì… íŒŒë¼ë¯¸í„° , íƒ€ì…ì„ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆë‹¤.
function getSize<T>(arr: number[] | string[]) {
  return arr.length;
}
const arr1 = [1, 2, 3];
getSize(arr1); //3
const arr2 = ["a", "b", "c"];
getSize(arr2); //3

//ì œë„ˆë¦­ íƒ€ì… ì‚¬ìš©
//TëŠ” íƒ€ì… íŒŒë¼ë¯¸í„° , íƒ€ì…ì„ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆë‹¤.
function getSize<T>(arr: T[]) {
  return arr.length;
}
const arr1 = [1, 2, 3];
getSize<number>(arr1); // ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ íƒ€ì…ì„ ì „ë‹¬í•´ì¤Œ number -> T
const arr2 = ["a", "b", "c"];
getSize<string>(arr2); //3 ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ íƒ€ì…ì„ ì „ë‹¬í•´ì¤Œ string -> T
```

<br />

> ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì œë„ˆë¦­ ì‚¬ìš©

```ts
interface Mobile<T> {
  name: string;
  price: number;
  option: T;
}
//ì‚¬ìš©í•˜ëŠ”ìª½ì—ì„œ íƒ€ì… ì „ë‹¬
const m1: Mobile<{ color: string; coupon: boolean }> = {
  name: "s1",
  price: 1000,
  option: {
    color: "red",
    coupon: false,
  },
};
//ì‚¬ìš©í•˜ëŠ”ìª½ì—ì„œ íƒ€ì… ì „ë‹¬
const m1: Mobile<string> = {
  name: "s1",
  price: 1000,
  option::"good"
};
```

<br />

> ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì œë„ˆë¦­ extend ì‚¬ìš©

```ts
interface User {
  name: string;
  age: number;
}
interface Car {
  name: string;
  color: string;
}
interface Book {
  price: number;
}

const user: User = { name: "a", age: 10 };
const car: Car = { name: "bmw", color: "red" };
const book: Book = { price: 3000 };

//extends ì‚¬ìš©
function showName<T extends { name: string }>(data: T): string {
  return data.name;
}

showName(user); // name ì†ì„±ì´ ìˆì–´ì„œ Ok
showName(car); // name ì†ì„±ì´ ìˆì–´ì„œ Ok
showName(book); //name ì†ì„±ì´ ì—†ì–´ì„œ ERROR...
```
