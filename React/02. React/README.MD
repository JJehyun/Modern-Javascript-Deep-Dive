# Immer (ë¶ˆë³€ì„± ìœ ì§€) ğŸ¯ğŸ’¡ğŸ”¥ğŸ“Œâœ…

- `Immer ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ë©´ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ëŠ” ì‘ì—…ì„ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.`

<br />

- produce : ë‘ê°€ì§€ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ”ë‹¤.
  - `originalState` : ìˆ˜ì •í•˜ê³  ì‹¶ì€ ìƒíƒœ
  - `draft` : ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸í• ì§€ ì •ì˜í•˜ëŠ” í•¨ìˆ˜

<br />

> ì‚¬ìš© ì˜ˆì‹œ

```js
import produce from "immer";
//originalState : ìˆ˜ì •í•˜ê³  ì‹¶ì€ ìƒíƒœ
//draft : ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸í• ì§€ ì •ì˜í•˜ëŠ” í•¨ìˆ˜
//ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì›í•˜ëŠ” ê°’ì„ ë³€ê²½í•˜ë©´,produce í•¨ìˆ˜ê°€ ë¶ˆë³€ì„± ìœ ì§€ë¥¼ ëŒ€ì‹ í•´ì£¼ë©´ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ìƒì„±í•œë‹¤.
const nextState = produce((originalState, draft) => {
  // ë°”ê¾¸ê³  ì‹¶ì€ ê°’ ë°”ê¾¸ê¸°
  draft.somewhere.deep.inside = 5;
});
```

<br />
<br />

- `useState í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸` ì™€ `immer` í•¨ê»˜ ì“°ê¸°

- `immerë¥¼ ì‚¬ìš©í•˜ë©´`, ë°°ì—´ì˜ ì§ì ‘ì ì¸ ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” `push`,`splice`ë“±ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©í•˜ë‹¤.

```
ğŸ’¡ useState í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë€?
  ìƒˆë¡œìš´ ìƒíƒœë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì§€ ì•Šê³  `ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì–´ë–»ê²Œ í•  ì§€ ì •ì˜í•´ì£¼ëŠ” ì—…ë°ì´íŠ¸ í•¨ìˆ˜`ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒ

produce í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ í•¨ìˆ˜ í˜•íƒœë¡œ ì‚¬ìš©í•˜ë©´ ê°€ë…ì„±ì´ í–¥ìƒëœë‹¤.
```

> immer ì˜ˆì‹œ

```js
import React, { useRef, useCallback, useState } from "react";
import produce from "immer";

const App = () => {
  const nextId = useRef(1);
  const [data, setData] = useState({
    array: [],
    uselessValue: null,
  });
  // input ìˆ˜ì •ì„ ìœ„í•œ í•¨ìˆ˜
  const onChange = useCallback((e) => {
    const { name, value } = e.target;
    //immerì—ì„œ ì œê³µí•˜ëŠ” produce í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°€ í•¨ìˆ˜ í˜•íƒœë¼ë©´, ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜.
    setForm(
      produce((draft) => {
        //ì›ë³¸ ë°°ì—´ì— ì§ì ‘ì ì¸ ë³€í™”
        draft[name] = value;
      })
    );
  }, []);

  // form ë“±ë¡ì„ ìœ„í•œ í•¨ìˆ˜
  const onSubmit = useCallback((e) => {
    e.preventDefault();
    //immerì—ì„œ ì œê³µí•˜ëŠ” produce í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°€ í•¨ìˆ˜ í˜•íƒœë¼ë©´, ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜.
    setData(
      produce((draft) => {
        //ì›ë³¸ ë°°ì—´ì— ì§ì ‘ì ì¸ ë³€í™”
        draft.array.push(info);
      })
    );
  }, []);
};
```

<br />
<br />

# Route

- `Route`
  - `useParams()` : URL íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” hook
  - `useLocation()` : í˜„ì¬ ì‚¬ìš©ìê°€ ë³´ê³  ìˆëŠ” í˜ì´ì§€ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    - `pathname` : í˜„ì¬ ì£¼ì†Œì˜ ê²½ë¡œ
    - `search` : ë§¨ ì•ì˜ ? ë¬¸ìë¥¼ í¬í•¨í•œ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ ê°’
    - `hash` : ì£¼ì†Œì˜ # ë¬¸ìì—´ ë’¤ì˜ ê°’
    - `state` : í˜ì´ì§€ë¡œ ì´ë™í•  ë•Œ ì„ì˜ë¡œ ë„£ì„ ìˆ˜ ìˆëŠ” ê°’
    - `key` : location ê°ì²´ì˜ ê³ ìœ ê°’, ì´ˆê¸°ì—ëŠ” defaultì´ë©°, í˜ì´ì§€ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê³ ìœ ì˜ ê°’ì´ ìƒì„±ëœë‹¤.

<br />
<br />

> ì˜ˆì‹œ

```jsx
<Routes>
  <Route path="ì£¼ì†Œ" element={ë³´ì—¬ì¤„ì»´í¬ë„ŒíŠ¸} />
  {/*ìœ ë™ url íŒŒë¦¬ë¯¸í„°*/}
  <Route path="/:name" element={ë³´ì—¬ì¤„ì»´í¬ë„ŒíŠ¸} />
  <Route path="/:name/:profile" element={ë³´ì—¬ì¤„ì»´í¬ë„ŒíŠ¸} />
  {/*í˜ì´ì§€ë¥¼ ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ë§‰ê³  History APIë¥¼ í†µí•´ ë¸Œë¼ìš°ì € ì£¼ì†Œì˜ ê²½ë¡œ ë³€ê²½*/}
  <Link to="ê²½ë¡œ">ë§í¬ ì´ë¦„</Link>
</Routes>
```

<br />
<br />

## useSearchParams ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ ë‹¤ë£¨ê¸° (1)

- `useSearchParams`ëŠ” ë°°ì—´ íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•œë‹¤.
  - `ì²«ë²ˆì§¸ ì›ì†Œ` : ì¿¼ë¦¬íŒŒë¼ë¯¸í„°ë¥¼ `ì¡°íšŒ`í•˜ê±°ë‚˜ `ìˆ˜ì •`í•˜ëŠ” ë©”ì„œë“œë“¤ì´ ë‹´ê¸´ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  - `ë‘ë²ˆì§¸ ì›ì†Œ` : ì¿¼ë¦¬íŒŒë¼ë¯¸í„°ë¥¼ `ê°ì²´ í˜•íƒœ`ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

<br />

```jsx
import { useSearchParams } from "react-router-dom";
//localhost:3000/about?detail=true&mode=1
const About = () => {
  const [searchParams, setSearchParams] = useSearchParams();
  //true
  const detail = searchParams.get("detail");
  //1
  const mode = searchParams.get("mode");

  const onIncreaseMode = () => {
    setSearchParams({ mode, detail: detail === "true" ? false : true });
  };
};
```

<br />
<br />

## useNavigation (2)

- Link ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™ í•´ì•¼í•˜ëŠ” ìƒí™©ì— ì‚¬ìš©
  - navigate
    - `replace` : `í˜ì´ì§€ë¥¼ ì´ë™ í•  ë•Œ í˜„ì¬ í˜ì´ì§€ë¥¼ í˜ì´ì§€ ê¸°ë¡ì— ë‚¨ê¸°ì§€ ì•ŠëŠ”ë‹¤.`

<br />

> ì˜ˆì‹œ

```js
import { useNavigation } from "react-router-dom";

const Layout = () => {
  const navigation = useNavigation();

  const goBack = () => {
    //ì´ì „ í˜ì´ì§€ë¡œ ì´ë™
    navigation(-1);
  };
  const goNext = () => {
    navigate("/", { replace: true });
  };
};
```

<br />
<br />

## NavLink (3)

- ë§í¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œê°€ `í˜„ì¬ ë¼ìš°íŠ¸ì˜ ê²½ë¡œì™€ ì¼ì°¨í•˜ëŠ” ê²½ìš°` `íŠ¹ì • ìŠ¤íƒ€ì¼` ë˜ëŠ” `CSSí´ë˜ìŠ¤`ë¥¼ ì ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤.

```js
import { NavLink } from "react-router-dom";

const App = () => {
  const active = {
    color: "green",
    fontSize: 21,
  };

  return (
    <>
      <NavLink
        to="/start/1"
        style={({ isActive }) => (isActive ? active : undefined)}
      >
        ë‹¤ìŒ1
      </NavLink>
      <NavLink
        to="/start/2"
        style={({ isActive }) => (isActive ? active : undefined)}
      >
        ë‹¤ìŒ2
      </NavLink>
    </>
  );
};
```

<br />
<br />

## NotFound í˜ì´ì§€ ë§Œë“¤ê¸° (4)

- `ì‚¬ì „ì— ì •ì˜ë˜ì§€ ì•ŠëŠ” ê²½ë¡œì— ì‚¬ìš©ìê°€ ì§„ì…í–ˆì„ë•Œ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€`
- `*` ë¼ìš°í„°ëŠ” ë¼ìš°íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ì˜ `ìƒë‹¨ì— ìœ„ì¹˜í•˜ëŠ” ë¼ìš°íŠ¸ë“¤ì˜ ê·œì¹™ì„ ëª¨ë‘ í™•ì¸`í•˜ê³ , `ì¼ì¹˜í•˜ëŠ” ë¼ìš°íŠ¸ê°€ ì—†ë‹¤ë©´` í™”ë©´ì— ë‚˜íƒ€ë‚´ê²Œ ëœë‹¤.

<br />

> ì‚¬ìš© ì˜ˆì‹œ

```jsx
import { Route, Routes } from "react-route-dom";

const App = () => {
  return (
    <Routes>
      <Route path="/" element={ë³´ì—¬ì¤„ì»´í¬ë„ŒíŠ¸}>
        <Route path="/detail" element={ë³´ì—¬ì¤„ì»´í¬ë„ŒíŠ¸} />
      </Route>
      <Route path="*" element={404} />
    </Routes>
  );
};
```

<br />
<br />

## Navigate ì»´í¬ë„ŒíŠ¸ (5)

- `ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ìˆœê°„ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸`
- ì¦‰, `ë¦¬ë‹¤ë¦¬ì—‘ì…˜`í•  ë•Œ ì‚¬ìš©

<br />
<br />

```jsx
import { Navigate } from "react-route-dom";

const Mypage = () => {
  //ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´, ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
  //replaceëŠ” í˜ì´ì§€ ê¸°ë¡ì„ ë‚¨ê¸°ì§€ ì•ŠëŠ” ì„¤ì •
  if(!isLoggedIn) <Navigate to='login' replace={true}>
}
```

<br />
<br />
<br />

# Context API

- `ì „ì—­ ê´€ë¦¬ API`

<br />

> 1. ìƒˆ Context ìƒì„±

```js
// /src/contexts/color.js
import { createContext } from "react";

export default const ColorContext = createContext({ color: "black" });
```

<br />

## `Consumer ì‚¬ìš©í•˜ê¸° (1)`

```js
import ColorContext from "../contexts/color";

const ColorBox = () => {
  return (
    <ColorContext.Consumer>
      {(value) => <div style={{ background: value.color }} />}
    </ColorContext.Consumer>
  );
};
```

```js
//ğŸ’¡ Render Props ì˜ˆì œ
// Render Props : ì»´í¬ë„ŒíŠ¸ì˜ childrenì´ ìˆì–´ì•¼ í•  ìë¦¬ì— ì¼ë°˜ JSXí˜¹ì€ ë¬¸ìì—´ì´ ì•„ë‹Œ í•¨ìˆ˜ë¥¼ ì „ë‹¬

export default const RenderPropsSample = ({ children }) => {
  return <div>ê²°ê³¼: {children(5)}</div>;
};

//ë§Œì•½ ìœ„ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ ì¶”í›„ ì‚¬ìš©í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©ê°€ëŠ¥
<RenderPropSample>{value => 2 * value}</RenderPropSample>
```

<br />
<br />
<br />

## `Provider ì‚¬ìš©í•˜ê¸° (2)`

- `Providerë¥¼ ì‚¬ìš©í•˜ë©´, Contextì˜ Valueë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.`

```jsx
// /src/contexts/color.js
import { createContext } from "react";
export default const ColorContext = createContext({ color: "black" });


//App.js
import ColorContext from "../contexts/color";

const App = () => {
  return (
    // Providerë¥¼ ì‚¬ìš©í•  ë• valueê°’ì„ ëª…ì‹œ í•´ì•¼ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
    <ColorContext.Provider value={{ color: "red" }}>
      <ColorBox />
    </ColorContext.Provider>
  );
};
```

<br />
<br />

---

<br />
<br />

## ë™ì  Context ì‚¬ìš©í•˜ê¸° ìƒˆ ì˜ˆì‹œ

> 1. Context ìƒì„±

```js
import React, { createContext, useState } from "react";

//stateê°’
const ColorContext = createContext({
  state: { color: "black", subcolor: "red" },
  actions: {
    setColor: () => {},
    setSubcolor: () => {},
  },
});

//Provider
const ColorProvider = ({ children }) => {
  const [color, setColor] = useState("black");
  const [subcolor, setSubcolor] = useState("red");

  const value = {
    state: { color, subcolor },
    actions: { setColor, setSubcolor },
  };
  return (
    <ColorContext.Provider value={value}>{children}</ColorContext.Provider>
  );
};

// const ColorConsumer = ColorContext.Consumerê³¼ ê°™ì€ ì˜ë¯¸
const { Consumer: ColorConsumer } = ColorContext;

// ColorProviderì™€ ColorConsumer ë‚´ë³´ë‚´ê¸°
export { ColorProvider, ColorConsumer };

export default ColorContext;
```

<br />

> 2. APPì»´í¬ë„ŒíŠ¸ Providerë¡œ ë¬¶ê¸° , state ì¡°íšŒ

```jsx
//App.js
import { ColorProvider } from "./contexts/color";

const App = () => {
  return (
    <ColorProvider>
      <ColorBox />
    </ColorProvider>
  );
};

//ColorBox.js
import { ColorConsumer } from "../contexts/color";
import React, { useContext } from "react";

const ColorBox = () => {
  //useContextí›… state ì¡°íšŒ
  const { state } = useContext(ColorContext);
  return (
    <>
      <div
        style={{
          background: state.color,
        }}
      />
      <div
        style={{
          background: state.subcolor,
        }}
      />
    </>
  );
};
```

<br />

> 3. state ë³€ê²½

```js
import React, { Component } from "react";
import ColorContext from "../contexts/color";

export default const SelectColors = () => {
  return(
    <>
      {/*state,action*/}
      <ColorContext>
        {({actions}) => (
          <div onClick={()=>{actions.setColor('red')}}/>
        )}
      </ColorContext>
    </>
  )
}
```

---

<br />
<br />
<br />
<br />
<br />
<br />

---

# Redux ì‚¬ìš©í•˜ê¸°

- `action` : Reduxì—ì„œ ê´€ë¦¬í•˜ê³  ìˆëŠ” stateì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ `dispatch`ë¡œ `action ê°ì²´`ë¥¼ `ì „ë‹¬`
- `reducer` : `actionì„ dispatchí•˜ë©´ reducer í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤.`

```
Ducks íŒ¨í„´ ì˜ˆì‹œ
 - modules/
   - counter.js
   - todos.js
```

<br />
<br />

## `(1) Redux í™˜ê²½ ì„¸íŒ…`

> 1.  ì•¡ì…˜ íƒ€ì… , ë¦¬ë“€ì„œ ì •ì˜ í•˜ê¸° ì˜ˆì œ

- `createAction` : ë§¤ë²ˆ ê°ì²´ë¥¼ ë§Œë“¤ í•„ìš”ì—†ì´ ê°„ë‹¨í•˜ê²Œ ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- `handleActions`

```js
// modules.counter.js
// ex) ëª¨ë“ˆì´ë¦„/ì•¡ì…˜ì´ë¦„
import { createAction, handleActions } from "redux-actions";

const INCREASE = "counter/INCREASE";
const DECREASE = "counter/DECREASE";

// dispatchì— í•„ìš”í•œ í•¨ìˆ˜ë“¤
// ì•¡ì…˜ í•¨ìˆ˜
export const increase = createAction(INCREASE);
export const decrease = createAction(DECREASE);

//ì´ˆê¸° ìƒíƒœ
const initialState = {
  number: 0,
};

//ë¦¬ë“€ì„œ
// handleActions(ê° ì•¡ì…˜ì— ëŒ€í•œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜, ì´ˆê¸° ìƒíƒœ)
const counter = handleActions(
  {
    [INCREASE]: (state, action) => ({ number: state.number + 1 }),
    [DECREASE]: (state, action) => ({ number: state.number - 1 }),
  },
  initialState
);

export default counter;
```

<br />
<br />

> 2. ë£¨íŠ¸ ë¦¬ë“€ì„œ ë§Œë“¤ê¸°

```js
// ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ ë•ŒëŠ” ë¦¬ë“€ì„œë¥¼ í•˜ë‚˜ë§Œ ì‚¬ìš© í•´ì•¼ í•œë‹¤.
// ê¸°ì¡´ì— ë§Œë“  ë¦¬ë“€ì„œë¥¼ í•©ì¹˜ê¸°
// modules/index.js
import { combineReducer } from "redux";
import counter from "./counter";
import todos from "./todos";

const rootReducer = combineReducer({
  counter,
  todos,
});
```

<br />
<br />

> 3. ìŠ¤í† ì–´ ë° Provider ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

```js
// ìŠ¤í† ì–´ ë§Œë“¤ê¸°
import rootReducer from "./modules";
import { createStore } from "redux";
import { Provider} from 'react-redux';

const store = createStore(rootReducer);
return (
<Provider store={store}>
  <App />
<Provider>
)
```

---

<br />
<br />

## (2) `ë¦¬ë•ìŠ¤ ìƒíƒœ ì¡°íšŒí•˜ê¸°` (ìƒíƒœ ì¡°íšŒ)

- `useSelector`ë¡œ ìƒíƒœ ì¡°íšŒ
  - useSelectorë¡œ ë¦¬ë•ìŠ¤ ìƒíƒœë¥¼ ì¡°íšŒí–ˆì„ë•ŒëŠ” ìµœì í™” ì ì—…ì´ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šìœ¼ë¯€ë¡œ, ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ì„œëŠ” `React.memo`ë¥¼ ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸ì— ì‚¬ìš© í•´ì•¼ í•œë‹¤.

> ì˜ˆì‹œ

```js
// modules.counter.js ì°¸ê³ 
const ê²°ê³¼ = useSelector(ìƒíƒœ ì„ íƒ í•¨ìˆ˜)

const number = useSelector(state => state.counter.number);
```

<br />
<br />

## (3) `useDispatchë¥¼ ì´ìš©í•´ì„œ ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜` (ìƒíƒœ ë³€ê²½)

- `useDispatch` : ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìŠ¤í† ì–´ ë‚´ì¥í•¨ìˆ˜ dispatchë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
  - ì»´í¬ë„ŒíŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•´ì•¼í•œë‹¤ë©´ ì´ HOOKë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

> ì˜ˆì‹œ

```js
import { useSelector, useDispatch } from "react-redux";
import { increase, decrease } from "../modules/counter";

const CounterContainer = () => {
  const number = useSelector((state) => state.counter.number);
  const dispatch = useDispatch();
  //ìˆ«ìê°€ ë°”ë€”ë•Œ ë§ˆë‹¤ onIcrease, onDecreaseí•¨ìˆ˜ê°€ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ ì§€ê³  ìˆë‹¤.
  //ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ useCallbackìœ¼ë¡œ ë¬¶ì–´ì¤€ë‹¤.
  const onIcrease = useCallback(() => dispatch(increase()), [dispatch]);
  const onDecrease = useCallback(() => dispatch(decrease()), [dispatch]);

  return (
    <Counter
      number={number}
      onIcrease={() => {
        dispatch(increase());
      }}
      onDecrease={() => {
        dispatch(decrease());
      }}
    />
  );
};
```

<br />
<br />

```js
ğŸ“Œ ë²ˆì™¸ - useActions ìœ í‹¸ hook ë§Œë“¤ì–´ì„œ ì‚¬ìš©
  - useActionsë¥¼ ì´ìš©í•˜ë©´ ì—¬ëŸ¬ ê°œì˜ ì•¡ì…˜ì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê²½ìš° ì½”ë“œë¥¼ í›¨ì”¬ ê¹”ë”í•˜ê²Œ ì •ë¦¬ í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥
  - ì•¡ì…˜ ìƒì„± í•¨ìˆ˜ë¥¼ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” í•¨ìˆ˜ë¡œ ë³€í™˜í•´ì¤€ë‹¤.
  - ì•¡ì…˜ ìƒì„±í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ì•¡ì…˜ ê°ì²´ë¥¼ ë§Œë“¤ê³ , ì´ë¥¼ ìŠ¤í† ì–´ì— ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” ì‘ì—…ì„ í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
// src/lib/useActions.js
import { bindActionCreators } from 'redux';
import { useDispatch } from 'react-redux';
import { useMemo } from 'react';

export default function useActions(actions, deps) {
  const dispatch = useDispatch();
  return useMemo(
    () => {
      if (Array.isArray(actions)) {
        return actions.map(a => bindActionCreators(a, dispatch));
      }
      return bindActionCreators(actions, dispatch);
    },
    deps ? [dispatch, ...deps] : deps
  );
}

// ì‚¬ìš©
  const [onChangeInput, onInsert, onToggle, onRemove] = useActions(
    [changeInput, insert, toggle, remove],
    []
  );

  return (
    <Todos
      input={input}
      todos={todos}
      onChangeInput={onChangeInput}
      onInsert={onInsert}
      onToggle={onToggle}
      onRemove={onRemove}
    />)
```

---

<br />
<br />
<br />
<br />
<br />
<br />

---

# Redux ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬

<br />

- ë¦¬ë•ìŠ¤ ë¯¸ë“¤ì›¨ì–´ëŠ” ì•¡ì…˜ì„ `ë””ìŠ¤íŒ¨ì¹˜í–ˆì„ ë•Œ`, ë¦¬ë“€ì„œì—ì„œ ì´ë¥¼ ì²˜ë¦¬í•˜ê¸°ì— `ì•ì„œ ì‚¬ì „ì— ì§€ì •ëœ ì‘ì—…`ì„ `ì‹¤í–‰`í•˜ëŠ” ê²ƒ

  - ë¯¸ë“¤ì›¨ì–´ëŠ” ê²°êµ­ `í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜`ì´ë‹¤.
  - `store` : ë¦¬ë•ìŠ¤ ìŠ¤í† ì–´ ì¸ìŠ¤í„´ìŠ¤, actionì€ ë””ìŠ¤íŒ¨ì¹˜ëœ ì•¡ì…˜ì„ ê°€ë¥´í‚¨ë‹¤.
  - `next` : `ê·¸ ë‹¤ìŒ ì²˜ë¦¬í•´ì•¼ í•  ë¯¸ë“¤ì›¨ì–´ì—ê²Œ ì•¡ì…˜ì„ ë„˜ê²¨ì¤€ë‹¤.`
    - ê·¸ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ê°€ ì—†ë‹¤ë©´ ë¦¬ë“€ì„œì—ê²Œ ì•¡ì…˜ì„ ë„˜ê²¨ì¤€ë‹¤.

```
[ì•¡ì…˜] -> [ë¯¸ë“¤ì›¨ì–´] -> [ë¦¬ë“€ì„œ] -> [ìŠ¤í† ì–´]
```

<br />
<br />

> ë¯¸ë“¤ì›¨ì–´ êµ¬ì¡°

```js
// lib/loggerMiddleware.js
const loggerMiddleware = (store) => (next) => (action) => {
  // ë¯¸ë“¤ì›¨ì–´ ê¸°ë³¸êµ¬ì¡°
};

//function í‚¤ì›Œë“œë¡œ
const loggerMiddleware = function loggerMiddleware(store) {
  return function (next) {
    return function (action) {
      //ë¯¸ë“¤ì›¨ì–´ ê¸°ë³¸ êµ¬ì¡°
    };
  };
};
```

<br />
<br />

> ë¯¸ë“¤ì›¨ì–´ êµ¬ì¡°

```js
export default const loggerMiddleware = (store) => (next) => (action) => {
  console.group(action && action.type); // ì•¡ì…˜ íƒ€ì…ìœ¼ë¡œ logë¥¼ ê·¸ë£¹í™”í•¨
  console.log("ì´ì „ ìƒíƒœ", store.getState());
  console.log("ì•¡ì…˜", action);
  next(action); //ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ í˜¹ì€ ë¦¬ë“€ì„œì—ê²Œ ì „ë‹¬
  console.log("ë‹¤ìŒ ìƒíƒœ", store.getState); //ì—…ë°ì´íŠ¸ëœ ìƒíƒœ
  console.groupEnd(); //ê·¸ë£¹ ë
};

//App.js
const store = createStore(rootReducer, applyMiddleware(loggerMiddleware))
<Provider store={store}>
</Provider>
```

<br />
<br />
<br />
<br />

# ë¹„ë™ê¸° ë¯¸ë“¤ì›¨ì–´ react-thunk

> 1. ì•¡ì…˜,ë¦¬ë“€ì„œ ì •ì˜

```js
import { createAction, handleActions } from "redux-actions";

// ì•¡ì…˜ íƒ€ì…ë“¤ì„ ì„ ì–¸
const GET_POST = "sample/GET_POST";
const GET_POST_SUCCESS = "sample/GET_POST_SUCCESS";

const GET_USERS = "sample/GET_USERS";
const GET_USERS_SUCCESS = "sample/GET_USERS_SUCCESS";

export const getPost = createAction(GET_POST, (id) => id);
export const getUsers = createAction(GET_USERS);

// ì´ˆê¸° ìƒíƒœë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
// ìš”ì²­ì˜ ë¡œë”©ì¤‘ ìƒíƒœëŠ” loading ì´ë¼ëŠ” ê°ì²´ì—ì„œ ê´€ë¦¬
const initialState = {
  post: null,
  users: null,
};

const sample = handleActions(
  {
    [GET_POST_SUCCESS]: (state, action) => ({
      ...state,
      post: action.payload,
    }),
    [GET_USERS_SUCCESS]: (state, action) => ({
      ...state,
      users: action.payload,
    }),
  },
  initialState
);

export default sample;
```

<br />

> 2. store ë“±ë¡

```js
//modules/index.js
import { combineReducers } from "redux";
import counter from "./sample";

const rootReducer = combineReducer({
  counter,
});

//App.js
import { createStore, applyMiddle } from "redux";
import { createLogger } from "redux-logger";
import ReduxThunk from "redux=thunk";
const logger = createLogger();
const store = createStore(rootReducer, applyMiddleware(logger, ReduxThunk));

<Provider store={store}>
  <App />
</Provider>;
```

<br />

> 3. ë°˜ë³µë˜ëŠ” ë¡œì§ ì œê±°

```js
// src/lib/createRequestThunk.js
import { startLoading, finishLoading } from "../modules/loading";

export default function createRequestThunk(type, request) {
  // ì„±ê³µ ë° ì‹¤íŒ¨ ì•¡ì…˜ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤.
  const SUCCESS = `${type}_SUCCESS`;
  const FAILURE = `${type}_FAILURE`;
  return (params) => async (dispatch) => {
    dispatch({ type }); // ì‹œì‘ë¨
    dispatch(startLoading(type));
    try {
      const response = await request(params);
      dispatch({
        type: SUCCESS,
        payload: response.data,
      }); // ì„±ê³µ
      dispatch(finishLoading(type));
    } catch (e) {
      dispatch({
        type: FAILURE,
        payload: e,
        error: true,
      }); // ì—ëŸ¬ ë°œìƒ
      dispatch(startLoading(type));
      throw e;
    }
  };
}
```

<br />

> 4. ë¡œë”©ë§Œ ê´€ë¦¬í•˜ëŠ” ë¦¬ë•ìŠ¤ ëª¨ë“ˆ

```js
import { createAction, handleActions } from "redux-actions";

const START_LOADING = "loading/START_LOADING";
const FINISH_LOADING = "loading/FINISH_LOADING";

/*
 ìš”ì²­ì„ ìœ„í•œ ì•¡ì…˜ íƒ€ì…ì„ payload ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ (ì˜ˆ: "sample/GET_POST")
*/

export const startLoading = createAction(
  START_LOADING,
  (requestType) => requestType
);

export const finishLoading = createAction(
  FINISH_LOADING,
  (requestType) => requestType
);

const initialState = {};

const loading = handleActions(
  {
    [START_LOADING]: (state, action) => ({
      ...state,
      [action.payload]: true,
    }),
    [FINISH_LOADING]: (state, action) => ({
      ...state,
      [action.payload]: false,
    }),
  },
  initialState
);

export default loading;
```

<br />
<br />
<br />
<br />

---

# ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

```
ğŸ’¡ import()í•¨ìˆ˜ë¥¼ ë©”ì„œë“œ ì•ˆì—ì„œ ì‚¬ìš©í•˜ë©°ëŠ íŒŒì¼ì„ ë”°ë¡œ ë¶„ë¦¬ì‹œì¼œ ì €ì¥í•œë‹¤. í•¨ìˆ˜ê°€ í•„ìš”í•œ ì‹œì ì— íŒŒì¼ì„ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ğŸ’¡ import()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ Promiseë¥¼ ë°˜í™˜í•œë‹¤. ì´ í•¨ìˆ˜ë¥¼ í†µí•´ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¬ë•Œ ëª¨ë“ˆì—ì„œ defaultë¡œ ë‚´ë³´ë‚¸ ê²ƒì€ result.defaultë¥¼ ì°¸ì¡° í•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
```

- ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ ìœ„í•´ ë¦¬ì•¡íŠ¸ì—ì„œ ë‚´ì¥ëœ ê¸°ëŠ¥ìœ¼ë¡œ ìœ í‹¸í•¨ìˆ˜ì¸ `React.lazy`ì™€ ì»´í¬ë„ŒíŠ¸ì¸ `Suspense`ì´ ìˆë‹¤.
  - `importí•¨ìˆ˜ë¥¼ í†µí•´ ë¶ˆëŸ¬ì˜¨ë‹¤ìŒ, ì»´í¬ë„ŒíŠ¸ ìì²´ë¥¼ state ë„£ì€ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.`
  - `React.lazy` : ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ì‹œì ì—ì„œ `ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë”©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ìœ í‹¸í•¨ìˆ˜`ì´ë‹¤.
  - `Suspense` : ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¡œë”©í•˜ë„ë¡ ë°œë™ì‹œí‚¬ ìˆ˜ ìˆê³ , `ë¡œë”©ì´ ëë‚˜ì§€ ì•Šì•˜ì„ë•Œ ë³´ì—¬ì¤„ UI ì„¤ì • ê°€ëŠ¥` í•˜ë‹¤.

<br />
<br />
<br />

```js
//ìƒë‹¨ì—ì„œ importí•˜ë©´, notifyì½”ë“œê°€ mainì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ëœë‹¤.
import notify from "./notify";

function App() {
  const onClick = () => {
    notify();
  };
}
return (
  <>
    <p onClick={onClick}>qq</p>
  </>
);

//import() í•¨ìˆ˜ í˜•íƒœë¡œ ë©”ì„œë“œ ì•ˆì—ì„œ ì‚¬ìš©í•˜ë©´ íŒŒì¼ì„ ë”°ë¡œ ë¶„ë¦¬ ì‹œì¼œ ì €ì¥í•œë‹¤.
//ì‹¤ì œ í•¨ìˆ˜ê°€ í•„ìš”í•œ ì§€ì ì— íŒŒì¼ì„ ë¶ˆëŸ¬ì™€ì„œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
import notify from "./notify";

function App() {
  const onClick = () => {
    import("./notify").then((result) => result.default());
  };
}
return (
  <>
    <p onClick={onClick}>qq</p>
  </>
);
```

<br />
<br />
<br />

## Loadable Componentsë¥¼ í†µí•œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

- `Loadable Components` : ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ í¸í•˜ê²Œ í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
  - ë Œë”ë§ ì „ì— í•„ìš”í•  ë•Œ ìŠ¤í”Œë¦¬íŒ…ëœ íŒŒì¼ì„ ë¯¸ë¦¬ ë¶ˆëŸ¬ì˜¬ ìˆ˜ë„ ìˆë‹¤.
  - React.lazyì™€ ì‚¬ìš©ë²•ì´ ë¹„ìŠ·í•˜ê³ , Suspenseë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ë‹¤.

<br />

> Loadable Components ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ì˜ˆì‹œ

```js
import loadable from "@loadable/component";
//ë¡œë”© ì¤‘ì— ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ë³´ì—¬ì£¼ê¸°
const SplitMe = loadble(() => import("./Splite"), {
  fallback: <div>Loading...</div>,
});

function App() {
  const [visible, setVisible] = useState(false);
  const onClick = () => {
    setVisible(true);
  };
  return <div>{visible && <SplitMe />}</div>;
}
```

<br />

> Loadable Components preload ì˜ˆì‹œ

```js
import loadable from "@loadable/component";
//ë¡œë”© ì¤‘ì— ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ë³´ì—¬ì£¼ê¸°
const SplitMe = loadble(() => import("./Splite"), {
  fallback: <div>Loading...</div>,
});
//ì»´í¬ë„ŒíŠ¸ ë¯¸ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
const onMouseOver = () => {
  SplitMe.preload();
};
function App() {
  const [visible, setVisible] = useState(false);
  const onClick = () => {
    setVisible(true);
  };
  return <div onMouseOver={onMouseOver}>{visible && <SplitMe />}</div>;
}
```
